<view class="admin-container">
  <navigation-bar title="ç®¡ç†å‘˜é¢æ¿" back="{{true}}" color="black" background="#FFF"></navigation-bar>

  <view class="menu-grid">
    <view class="menu-item" bindtap="navigateToUserManager">
      <text class="menu-icon">ğŸ‘¥</text>
      <text class="menu-text">ç”¨æˆ·ç®¡ç†</text>
    </view>
    <view class="menu-item" bindtap="navigateToDeviceManager">
      <text class="menu-icon">ğŸ”§</text>
      <text class="menu-text">è®¾å¤‡ç®¡ç†</text>
    </view>
    <view class="menu-item" bindtap="navigateToReservationManager">
      <text class="menu-icon">ğŸ“…</text>
      <text class="menu-text">é¢„çº¦ç®¡ç†</text>
    </view>
  </view>

  <view class="content">
    <view class="section">
      <text class="section-title">é€‰æ‹©ç”¨æˆ·</text>
      <picker bindchange="onUserSelect" value="{{selectedUserId}}" range="{{users}}" range-key="name">
        <view class="picker">
          {{selectedUserId !== null ? users[selectedUserId].name : 'è¯·é€‰æ‹©ç”¨æˆ·'}}
        </view>
      </picker>
    </view>

    <view class="section" wx:if="{{selectedUserId !== null}}">
      <text class="section-title">è®¾å¤‡æƒé™ç®¡ç†</text>
      <view class="device-list">
        <view class="device-item" wx:for="{{devices}}" wx:key="id">
          <text class="device-name">{{item.name}}</text>
          <switch checked="{{userDevices.includes(item.id)}}" data-device-id="{{item.id}}" bindchange="onDeviceToggle" />
        </view>
      </view>
    </view>
  </view>
</view>
